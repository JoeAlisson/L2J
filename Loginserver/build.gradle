plugins {
    id "java"
    id "idea"
    id "eclipse"
}


configurations.all {
    transitive = false
}

dependencies {

    compile project(':Commons')
    compile project(':Mmocore')
    compile fileTree(dir: 'lib', include: '*.jar')
}


def generalManifest = manifest {
    attributes('Built-By': System.getProperty('user.name'),
            'Built-Date': new Date().format("yyyy-MM-dd HH:mm:ss"))
}

jar {
    manifest {
        from(generalManifest)
        attributes('Main-Class': 'com.l2jbr.loginserver.L2LoginServer')
    }
}

task zip(type: Zip, group: "Archive", description: "Zip Loginserver") {
    into('lib') {
        from([jar, configurations.compile])
    }

    into('bin') {
        from('bin')
    }
}

build.finalizedBy(zip)
